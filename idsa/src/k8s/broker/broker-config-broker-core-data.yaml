apiVersion: v1
kind: ConfigMap
metadata:
  name: broker-core-config-data
  namespace: gxfs-idsa
binaryData:
  isstbroker-keystore.jks: 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
data:
  init.sh: |
    #!/bin/sh
    waitForService() {
      attempt_counter=0
      result=true
      printf 'Waiting for %s service ' $2
      until $(curl --output /dev/null --silent --head --fail $3); do
      if [ ${attempt_counter} -eq ${1} ];then
        echo "Max attempts reached, exiting"
        exit 1
      fi
      printf '.'
      attempt_counter=$(($attempt_counter+1))
      sleep 5
      done
    }
    waitForService 10 "elasticsearch" "http://broker-elasticsearch-service:9200"
    printf '\nelasticsearch service is running'
